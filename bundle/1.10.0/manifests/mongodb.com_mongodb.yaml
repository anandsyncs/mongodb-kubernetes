apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: mongodb.mongodb.com
spec:
  group: mongodb.com
  names:
    kind: MongoDB
    listKind: MongoDBList
    plural: mongodb
    shortNames:
    - mdb
    singular: mongodb
  scope: Namespaced
  additionalPrinterColumns:
  - description: Current state of the MongoDB deployment.
    JSONPath: .status.phase
    name: Phase
    type: string
  - description: Version of MongoDB server.
    JSONPath: .status.version
    name: Version
    type: string
  - description: The type of MongoDB deployment. One of 'ReplicaSet', 'ShardedCluster' and 'Standalone'.
    JSONPath: .spec.type
    name: Type
    type: string
  - description: The time since the MongoDB resource was created.
    JSONPath: .metadata.creationTimestamp
    name: Age
    type: date
  version: v1

  validation:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              additionalMongodConfig:
                type: object
                x-kubernetes-preserve-unknown-fields: true
              agent:
                properties:
                  startupOptions:
                    additionalProperties:
                      type: string
                    type: object
                type: object
              backup:
                description: Backup contains configuration options for configuring backup for this MongoDB resource
                properties:
                  mode:
                    enum:
                    - enabled
                    - disabled
                    - terminated
                    type: string
                type: object
              cloudManager:
                properties:
                  configMapRef:
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              clusterDomain:
                format: hostname
                type: string
              clusterName:
                description: 'Deprecated: This has been replaced by the ClusterDomain which should be used instead'
                format: hostname
                type: string
              configServerCount:
                type: integer
              configSrv:
                properties:
                  additionalMongodConfig:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    properties:
                      startupOptions:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                type: object
                x-kubernetes-preserve-unknown-fields: true
              configSrvPodSpec:
                properties:
                  cpu:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  cpuRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memory:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memoryRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  nodeAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  persistence:
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  podAntiAffinityTopologyKey:
                    type: string
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              connectivity:
                properties:
                  replicaSetHorizons:
                    items:
                      additionalProperties:
                        type: string
                      description: 'MongoDBHorizonConfig holds a map of horizon names to the node addresses, e.g. {   "internal": "my-rs-2.my-internal-domain.com:31843",   "external": "my-rs-2.my-external-domain.com:21467" } The key of each item in the map is an arbitrary, user-chosen string that represents the name of the horizon. The value of the item is the host and, optionally, the port that this mongod node will be connected to from.'
                      type: object
                    type: array
                type: object
              credentials:
                description: Name of the Secret holding credentials information
                type: string
              exposedExternally:
                description: ExposedExternally determines whether a NodePort service should be created for the resource
                type: boolean
              featureCompatibilityVersion:
                type: string
              logLevel:
                enum:
                - DEBUG
                - INFO
                - WARN
                - ERROR
                - FATAL
                type: string
              members:
                type: integer
              mongodsPerShardCount:
                type: integer
              mongos:
                properties:
                  additionalMongodConfig:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    properties:
                      startupOptions:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                type: object
                x-kubernetes-preserve-unknown-fields: true
              mongosCount:
                type: integer
              mongosPodSpec:
                properties:
                  cpu:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  cpuRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memory:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memoryRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  nodeAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  persistence:
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  podAntiAffinityTopologyKey:
                    type: string
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              opsManager:
                properties:
                  configMapRef:
                    properties:
                      name:
                        type: string
                    type: object
                type: object
              persistent:
                type: boolean
              podSpec:
                properties:
                  cpu:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  cpuRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memory:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memoryRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  nodeAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  persistence:
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  podAntiAffinityTopologyKey:
                    type: string
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              project:
                description: 'Deprecated: This has been replaced by the PrivateCloudConfig which should be used instead'
                type: string
              security:
                properties:
                  authentication:
                    description: Authentication holds various authentication related settings that affect this MongoDB resource.
                    properties:
                      agents:
                        description: Agents contains authentication configuration properties for the agents
                        properties:
                          automationLdapGroupDN:
                            type: string
                          automationPasswordSecretRef:
                            description: SecretKeySelector selects a key of a Secret.
                            properties:
                              key:
                                description: The key of the secret to select from.  Must be a valid secret key.
                                type: string
                              name:
                                description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?'
                                type: string
                              optional:
                                description: Specify whether the Secret or its key must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                          automationUserName:
                            type: string
                          clientCertificateSecretRef:
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                          mode:
                            type: string
                        required:
                        - mode
                        type: object
                      enabled:
                        type: boolean
                      ignoreUnknownUsers:
                        description: IgnoreUnknownUsers maps to the inverse of auth.authoritativeSet
                        type: boolean
                      internalCluster:
                        type: string
                      ldap:
                        description: LDAP
                        properties:
                          authzQueryTemplate:
                            type: string
                          bindQueryPasswordSecretRef:
                            properties:
                              name:
                                description: kubebuilder:validation:Required
                                type: string
                            required:
                            - name
                            type: object
                          bindQueryUser:
                            type: string
                          caConfigMapRef:
                            description: Allows to point at a ConfigMap/key with a CA file to mount on the Pod
                            properties:
                              key:
                                description: The key to select.
                                type: string
                              name:
                                description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?'
                                type: string
                              optional:
                                description: Specify whether the ConfigMap or its key must be defined
                                type: boolean
                            required:
                            - key
                            type: object
                          servers:
                            items:
                              type: string
                            type: array
                          transportSecurity:
                            enum:
                            - tls
                            - none
                            type: string
                          userToDNMapping:
                            type: string
                          validateLDAPServerConfig:
                            type: boolean
                        type: object
                      modes:
                        items:
                          type: string
                        type: array
                      requireClientTLSAuthentication:
                        description: Clients should present valid TLS certificates
                        type: boolean
                    required:
                    - enabled
                    type: object
                  clusterAuthenticationMode:
                    description: 'Deprecated: This has been replaced by Authentication.InternalCluster which should be used instead'
                    type: string
                  roles:
                    items:
                      properties:
                        authenticationRestrictions:
                          items:
                            properties:
                              clientSource:
                                items:
                                  type: string
                                type: array
                              serverAddress:
                                items:
                                  type: string
                                type: array
                            type: object
                          type: array
                        db:
                          type: string
                        privileges:
                          items:
                            properties:
                              actions:
                                items:
                                  type: string
                                type: array
                              resource:
                                properties:
                                  cluster:
                                    type: boolean
                                  collection:
                                    type: string
                                  db:
                                    type: string
                                type: object
                            required:
                            - actions
                            - resource
                            type: object
                          type: array
                        role:
                          type: string
                        roles:
                          items:
                            properties:
                              db:
                                type: string
                              role:
                                type: string
                            required:
                            - db
                            - role
                            type: object
                          type: array
                      required:
                      - db
                      - role
                      type: object
                    type: array
                  tls:
                    properties:
                      additionalCertificateDomains:
                        items:
                          type: string
                        type: array
                      ca:
                        description: CA corresponds to a ConfigMap containing an entry for the CA certificate (ca.pem) used to validate the certificates created already.
                        type: string
                      enabled:
                        description: Enables TLS for this resource. This will make the operator try to mount a Secret with a defined name (<resource-name>-cert). This is only used when enabling TLS on a MongoDB resource, and not on the AppDB, where TLS is configured by setting `secretRef.Name`.
                        type: boolean
                      secretRef:
                        description: SecretRef points to a Secret object containing the certificates to use when enabling TLS.
                        properties:
                          name:
                            description: DEPRECATED please use security.tls.secretRef.prefix instead
                            type: string
                          prefix:
                            type: string
                        type: object
                    type: object
                type: object
              service:
                type: string
              shard:
                properties:
                  additionalMongodConfig:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  agent:
                    properties:
                      startupOptions:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                type: object
                x-kubernetes-preserve-unknown-fields: true
              shardCount:
                type: integer
              shardPodSpec:
                properties:
                  cpu:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  cpuRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memory:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  memoryRequests:
                    description: DEPRECATED. Please set this value using `spec.podTemplate` instead.
                    type: string
                  nodeAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  persistence:
                    properties:
                      multiple:
                        properties:
                          data:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          journal:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                          logs:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                        operator:
                                          type: string
                                        values:
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    type: object
                                type: object
                              storage:
                                type: string
                              storageClass:
                                type: string
                            type: object
                        type: object
                      single:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          storage:
                            type: string
                          storageClass:
                            type: string
                        type: object
                    type: object
                  podAffinity:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  podAntiAffinityTopologyKey:
                    type: string
                  podTemplate:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                type: object
              type:
                enum:
                - Standalone
                - ReplicaSet
                - ShardedCluster
                type: string
              version:
                pattern: ^[0-9]+.[0-9]+.[0-9]+(-.+)?$|^$
                type: string
            required:
            - credentials
            - type
            - version
            type: object
            x-kubernetes-preserve-unknown-fields: true
          status:
            properties:
              backup:
                properties:
                  statusName:
                    type: string
                required:
                - statusName
                type: object
              configServerCount:
                type: integer
              lastTransition:
                type: string
              link:
                type: string
              members:
                type: integer
              message:
                type: string
              mongodsPerShardCount:
                type: integer
              mongosCount:
                type: integer
              observedGeneration:
                format: int64
                type: integer
              phase:
                type: string
              resourcesNotReady:
                items:
                  properties:
                    errors:
                      items:
                        properties:
                          message:
                            type: string
                          reason:
                            type: string
                        type: object
                      type: array
                    kind:
                      type: string
                    message:
                      type: string
                    name:
                      type: string
                  required:
                  - kind
                  - name
                  type: object
                type: array
              shardCount:
                type: integer
              version:
                type: string
              warnings:
                items:
                  type: string
                type: array
            required:
            - phase
            - version
            type: object
        required:
        - spec
        type: object
  subresources:
    status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
