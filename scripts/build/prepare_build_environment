#!/usr/bin/env bash

cd "$(git rev-parse --show-toplevel || echo "Failed to find git root"; exit 1)"

# k8s.io/code-generator needs to have a vendor dir
# https://github.com/kubernetes/sample-apiserver#when-using-go-111-modules
export GOFLAGS="-mod=vendor"
export GO111MODULE="on"

# Get the go environment for debugging purposes
go env

# The modules will be copied over to vendor directory
go mod vendor

## Generate code
scripts/build/codegen.sh

go version
