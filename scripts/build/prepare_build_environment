#!/usr/bin/env bash

cd "$(git rev-parse --show-toplevel || echo "Failed to find git root"; exit 1)"

export GO111MODULE=on
export GOFLAGS="-mod=vendor"

# k8s.io/code-generator needs to have a vendor dir
# https://github.com/kubernetes/sample-apiserver#when-using-go-111-modules
go mod vendor

## Generate code
scripts/build/codegen.sh

go version
